(this.webpackJsonpcs124=this.webpackJsonpcs124||[]).push([[0],{47:function(e,t,n){},48:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var c=n(16),i=n.n(c),r=n(42),a=n.n(r),s=(n(47),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,54)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),i(e),r(e),a(e)}))}),l=n(13),u=(n(48),n(5)),o=(n(49),n(6));function d(e){return Object(o.jsxs)("div",{className:"checklist",children:[Object(o.jsx)("input",{type:"checkbox",onInput:e.checkFunction,id:e.id,name:e.id,value:e.id,defaultChecked:e.completed},e.id),Object(o.jsx)("label",{htmlFor:e.id,children:e.title+" ("+{1:"High",2:"Medium",3:"Low"}[e.priority]+") "}),Object(o.jsx)("button",{onClick:function(){return e.modifyTask(e.title,e.id)},children:"Modify"})]})}var j=n(31);function h(e){var t=i.a.useState(e.taskName),n=Object(l.a)(t,2),c=n[0],r=n[1],a=i.a.useState(e.priority),s=Object(l.a)(a,2),u=s[0],d=s[1];return Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{className:"miscTextLarger",children:"Modify Task:"}),Object(o.jsx)("input",{type:"text",id:"changeTask",name:"changeTask",defaultValue:e.taskName,onChange:function(e){return r(e.target.value)}}),Object(o.jsxs)("select",{name:"priority",id:"priority-dropdown","aria-label":"dropdown to select priority",onChange:function(e){return d(e.target.value)},children:[Object(o.jsx)("option",{value:"1",children:"High"}),Object(o.jsx)("option",{value:"2",children:"Medium"}),Object(o.jsx)("option",{value:"3",children:"Low"})]}),Object(o.jsx)("input",{type:"button",value:"Cancel",onClick:function(){return e.cancel()}}),Object(o.jsx)("input",{type:"button",value:"Modify",onClick:function(){return e.taskName!==c&&e.handleChangeField(e.id,"title",c),void(e.priority!==u&&e.handleChangeField(e.id,"priority",u))}})]})}function b(e){var t=i.a.useState(""),n=Object(l.a)(t,2),c=n[0],r=n[1],a=i.a.useState("1"),s=Object(l.a)(a,2),u=s[0],d=s[1];return console.log("in new task page"),Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{className:"miscTextLarger",children:"Add New Task:"}),Object(o.jsx)("input",{type:"text",id:"newTask",name:"newTask",onChange:function(e){return r(e.target.value)}}),Object(o.jsxs)("select",{name:"priority",id:"priority-dropdown","aria-label":"dropdown to select priority",onChange:function(e){return d(e.target.value)},children:[Object(o.jsx)("option",{value:"1",children:"High"}),Object(o.jsx)("option",{value:"2",children:"Medium"}),Object(o.jsx)("option",{value:"3",children:"Low"})]}),Object(o.jsx)("input",{type:"button",value:"Cancel",onClick:function(){return e.cancel()}}),Object(o.jsx)("input",{type:"button",value:"Add",onClick:function(t){return e.addNewDataPoint(c,u)}})]})}var O=n(35),x=n(27);function g(e){var t=Object(j.a)(e.collection.doc(e.currentList).collection("tasks").orderBy(e.sortValue,"asc")),n=Object(l.a)(t,3),i=n[0],r=(n[1],n[2],[]);void 0!==i&&(r=i.docs.map((function(e){return e.data()})));var a=Object(c.useState)(!1),s=Object(l.a)(a,2),g=s[0],p=s[1],m=g?"Show Completed Tasks":"Hide Completed Tasks",f=Object(c.useState)([]),v=Object(l.a)(f,2),C=v[0],k=v[1];function L(t,n,c){e.collection.doc(e.currentList).collection("tasks").doc(t).update(Object(u.a)({},n,c)),e.changeCurrentPage("checklist")}function y(t,n){e.changeCurrentPage("modifyTask"),k([t,n])}function w(e){return r.map((function(t){return e&&t.completed||!e&&!t.completed?Object(o.jsx)(d,{id:t.id,title:t.title,completed:t.completed,checkFunction:function(e){return n=e.target.checked,void L(t.id,"completed",n);var n},modifyTask:y,priority:t.priority},t.id):void 0}))}return Object(o.jsxs)("div",{children:["checklist"===e.currentPage&&Object(o.jsxs)("div",{children:[Object(o.jsx)("form",{children:Object(o.jsxs)("table",{children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[!g&&Object(o.jsx)("th",{children:"Complete"}),Object(o.jsx)("th",{children:"Incomplete"})]})}),Object(o.jsx)("tbody",{children:Object(o.jsxs)("tr",{children:[!g&&Object(o.jsx)("td",{children:w(!0)}),Object(o.jsx)("td",{children:w(!1)})]})})]})}),Object(o.jsxs)("div",{className:"buttons",children:[Object(o.jsx)("input",{type:"button",value:"Add New Task",onClick:function(){return e.changeCurrentPage("addTask")}}),Object(o.jsx)("input",{type:"button",value:m,onClick:function(){p(!g),e.changeCurrentPage("checklist")}}),r.filter((function(e){return e.completed})).length>0&&Object(o.jsx)("input",{type:"button",value:"Delete Completed Tasks",onClick:function(){r.forEach((function(t){return t.completed&&(n=t.id,e.collection.doc(e.currentList).collection("tasks").doc(n).delete(),void e.changeCurrentPage("checklist"));var n})),e.changeCurrentPage("checklist")}})]})]}),Object(o.jsxs)("div",{children:["modifyTask"===e.currentPage&&Object(o.jsx)(h,{handleChangeField:L,taskName:C[0],id:C[1],cancel:function(){return e.changeCurrentPage("checklist")}}),"addTask"===e.currentPage&&Object(o.jsx)(b,{addNewDataPoint:function(t,n){var c=Object(O.a)();e.collection.doc(e.currentList).collection("tasks").doc(c).set({title:t,id:c,completed:!1,priority:n,created:x.a.database.ServerValue.TIMESTAMP,list:e.currentList}),e.changeCurrentPage("checklist")},cancel:function(){return e.changeCurrentPage("checklist")}})]}),Object(o.jsx)("div",{})]})}var p=n(18);function m(e){return Object(o.jsxs)("div",{children:[Object(o.jsxs)("h1",{id:"deleteList",children:["Are you sure you want to delete ",e.listName,"?"]}),Object(o.jsx)("input",{type:"button",value:"Cancel","aria-label":"Cancel delete "+e.listName,onClick:function(){return e.cancel()}}),Object(o.jsx)("input",{type:"button",value:"Confirm","aria-label":"Delete "+e.listName,onClick:function(){return e.deleteCurrentList(e.listId)}})]})}function f(e){var t=i.a.useState(""),n=Object(l.a)(t,2),c=n[0],r=n[1];return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Add New List:"}),Object(o.jsx)("input",{type:"text",id:"newList",name:"newList",onChange:function(e){return r(e.target.value)}}),Object(o.jsx)("input",{type:"button",value:"Cancel",onClick:function(){return e.cancel()}}),Object(o.jsx)("input",{type:"button",value:"Add",onClick:function(t){return e.addNewList(c)}})]})}function v(e){var t=i.a.useState(""),n=Object(l.a)(t,2),c=n[0],r=n[1];return Object(o.jsxs)("div",{children:[Object(o.jsx)("button",{value:"Delete Current List","aria-label":"Delete list",onClick:function(){return e.changeCurrentPage("deleteList")},children:"Delete List"}),Object(o.jsx)("h1",{id:"shareList",htmlFor:"shareListEmail",className:"miscTextLarger",children:"Enter an email to share this list with:"}),Object(o.jsx)("input",{type:"text",id:"shareListEmail",name:"shareListEmail",onChange:function(e){return r(e.target.value)}}),Object(o.jsx)("input",{type:"button",value:"Share",onClick:function(t){return e.shareList(c)}}),e.sharedWith.length>0&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h1",{className:"miscTextLarger",children:"Users currently shared with:"}),e.sharedWith.map((function(t){return Object(o.jsxs)("div",{className:"miscText",children:[t,Object(o.jsx)("button",{className:"removePersonButton",value:"Remove List Sharing","aria-label":"Remove list sharing for "+t,onClick:function(){return e.removePerson(t,"settings")},children:Object(o.jsx)("i",{className:"fa fa-trash","aria-hidden":"true"})})]})}))]}),Object(o.jsx)("input",{type:"button",value:"Return To List",onClick:function(){return e.cancel()}})]})}function C(e){return Object(o.jsxs)("div",{children:[Object(o.jsxs)("h1",{className:"miscTextLarger",id:"deleteList",children:["Are you sure you want to leave ",e.listName,"?"]}),Object(o.jsx)("h1",{className:"miscText",children:" Other users will still be able to view this list."}),Object(o.jsx)("input",{type:"button",value:"Cancel","aria-label":"Cancel leave "+e.listName,onClick:function(){return e.cancel()}}),Object(o.jsx)("input",{type:"button",value:"Confirm","aria-label":"Leave "+e.listName,onClick:function(){return e.leaveCurrentList(e.user.email,"checklist")}})]})}function k(e){var t=Object(j.a)(e.collection.where("sharing","array-contains",e.user.email)),n=Object(l.a)(t,3),c=n[0],i=n[1],r=(n[2],Object(j.a)(e.collection.where("owner","==",e.user.uid))),a=Object(l.a)(r,3),s=a[0],u=a[1],d=(a[2],[]),h=[];function b(t,n){e.collection.doc(e.currentList).update({sharing:x("sharing").filter((function(e){return e!==t}))}),e.changeCurrentPage(n),"checklist"===n&&e.changeCurrentList(null)}function x(t){return d.concat(h).filter((function(t){return t.id===e.currentList}))[0][t]}return void 0!==s&&(d=s.docs.map((function(e){return e.data()}))),void 0!==c&&e.user.emailVerified&&(h=c.docs.map((function(e){return e.data()}))),Object(o.jsxs)("div",{children:[!i&&!u&&"newList"!==e.currentPage&&null!==e.currentList&&Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("h1",{children:[x("title"),h.filter((function(t){return t.id===e.currentList})).length>0&&" (shared)"]})}),"checklist"===e.currentPage&&Object(o.jsxs)("div",{id:"sort-by",children:["Select a list:",Object(o.jsxs)("select",{name:"listSelector","aria-label":"dropdown to select list",id:"listSelectorDropdown",onChange:function(t){return e.changeCurrentList(t.target.value)},children:[null===e.currentList&&Object(o.jsx)("option",{disabled:!0,selected:!0,value:!0,children:"Select a list..."}),d.map((function(t){return Object(o.jsx)("option",{value:t.id,selected:t.id===e.currentList,children:t.title})})),h.map((function(t){return Object(o.jsx)("option",{value:t.id,selected:t.id===e.currentList,children:t.title+" (shared)"})}))]}),Object(o.jsx)("button",{id:"addButton","aria-label":"Add new list",onClick:function(){return e.changeCurrentPage("newList")},children:"+"}),null!==e.currentList&&Object(o.jsxs)("span",{children:[x("owner")===e.user.uid&&Object(o.jsx)("button",{id:"settingsButton",value:"View and Change List Settings","aria-label":"View and Change List Settings",onClick:function(){return e.changeCurrentPage("settings")},children:Object(o.jsx)("i",{className:"fa fa-cog","aria-hidden":"true"})}),x("owner")!==e.user.uid&&Object(o.jsx)("button",{id:"deleteButton",value:"Delete Current List","aria-label":"Delete list",onClick:function(){return e.changeCurrentPage("leaveList")},children:Object(o.jsx)("i",{className:"fa fa-trash","aria-hidden":"true"})})]})]}),"deleteList"===e.currentPage&&Object(o.jsx)(m,{listName:x("title"),listId:e.currentList,deleteCurrentList:function(t){e.changeCurrentList(null),e.collection.doc(t).delete(),e.changeCurrentPage("checklist")},cancel:function(){return e.changeCurrentPage("checklist")}}),"leaveList"===e.currentPage&&Object(o.jsx)(C,{listName:x("title"),listId:e.currentList,user:e.user,leaveCurrentList:b,cancel:function(){return e.changeCurrentPage("checklist")}}),"newList"===e.currentPage&&Object(o.jsx)(f,{addNewList:function(t){var n=Object(O.a)();e.collection.doc(n).set({title:t,id:n,owner:e.user.uid,sharing:[]}).then((function(){e.changeCurrentList(n),e.changeCurrentPage("checklist")}))},cancel:function(){return e.changeCurrentPage("checklist")}}),"settings"===e.currentPage&&Object(o.jsx)(v,{removePerson:b,getListField:x,sharedWith:x("sharing"),shareList:function(t){e.collection.doc(e.currentList).update({sharing:[].concat(Object(p.a)(x("sharing")),[t])})},changeCurrentPage:e.changeCurrentPage,cancel:function(){return e.changeCurrentPage("checklist")}})]})}var L=n(32);function y(e){var t=Object(L.b)(e.auth),n=Object(l.a)(t,4),i=n[0],r=(n[1],n[2]),a=n[3],s=Object(c.useState)(null),u=Object(l.a)(s,2),d=u[0],j=u[1],h=Object(c.useState)(null),b=Object(l.a)(h,2),O=b[0],x=b[1];return console.log(a),Object(o.jsx)("div",{children:!r&&Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Sign up"}),Object(o.jsx)("label",{htmlFor:"email",className:"miscText",children:"Email:"}),Object(o.jsx)("input",{type:"text",id:"email",name:"email",onInput:function(e){return j(e.target.value)}}),Object(o.jsx)("label",{htmlFor:"password",className:"miscText",children:"Password:"}),Object(o.jsx)("input",{type:"password",id:"password",name:"password",onInput:function(e){return x(e.target.value)}}),Object(o.jsx)("button",{onClick:function(){return i(d,O)},children:"Sign Up"}),a&&Object(o.jsx)("div",{className:"error miscText",children:a.message})]})})}function w(e){var t=new x.a.auth.GoogleAuthProvider,n=Object(L.c)(e.auth),i=Object(l.a)(n,4),r=i[0],a=(i[1],i[2]),s=i[3],u=Object(c.useState)(null),d=Object(l.a)(u,2),j=d[0],h=d[1],b=Object(c.useState)(null),O=Object(l.a)(b,2),g=O[0],p=O[1];return console.log(s),Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Sign in"}),Object(o.jsx)("label",{htmlFor:"signInEmail",className:"miscText",children:"Email:"}),Object(o.jsx)("input",{type:"text",id:"signInEmail",name:"email",onInput:function(e){return h(e.target.value)}}),Object(o.jsx)("label",{htmlFor:"signInPassword",className:"miscText",children:"Password:"}),Object(o.jsx)("input",{type:"password",id:"signInPassword",name:"password",onInput:function(e){return p(e.target.value)}}),Object(o.jsx)("button",{onClick:function(){return r(j,g)},children:"Sign in"}),Object(o.jsx)("button",{onClick:function(){return e.auth.signInWithPopup(t)},children:"Sign in with Google"}),!a&&s&&Object(o.jsx)("div",{className:"error miscText",children:s.message})]})}function P(e){var t=Object(c.useState)("title"),n=Object(l.a)(t,2),i=n[0],r=n[1],a=Object(c.useState)(null),s=Object(l.a)(a,2),u=s[0],d=s[1],j=Object(c.useState)("checklist"),h=Object(l.a)(j,2),b=h[0],O=h[1],x=Object(c.useState)(!1),p=Object(l.a)(x,2),m=p[0],f=p[1];function v(e){O(e)}return Object(o.jsxs)("div",{children:[Object(o.jsx)(k,{currentList:u,changeCurrentList:function(e){d(e)},collection:e.collection,changeCurrentPage:v,currentPage:b,user:e.user}),"checklist"===b&&null!==u&&Object(o.jsx)("div",{className:"selectDropdowns",children:Object(o.jsxs)("div",{id:"sort-by",children:["Sort by:",Object(o.jsxs)("select",{name:"sortBy",id:"sortByDropdown","aria-label":"dropdown to select value to sort by",onChange:function(e){return r(e.target.value)},defaultValue:i,children:[Object(o.jsx)("option",{value:"title",selected:"title"===i,children:"Title"}),Object(o.jsx)("option",{value:"priority",selected:"priority"===i,children:"Priority"}),Object(o.jsx)("option",{value:"created",selected:"created"===i,children:"Date created"})]})]})}),null!==u&&Object(o.jsx)("div",{children:Object(o.jsx)(g,{currentList:u,sortValue:i,changeCurrentPage:v,collection:e.collection,currentPage:b})}),Object(o.jsxs)("div",{className:"miscText",children:["Signed in as ",e.user.email,"."]}),Object(o.jsx)("button",{onClick:function(){return e.auth.signOut()},children:"Sign Out"}),null===u&&"checklist"===b&&e.user&&!e.user.emailVerified&&Object(o.jsxs)("div",{children:[Object(o.jsx)("button",{onClick:function(){console.log("trying verifying email"),e.user.sendEmailVerification(),f(!0)},children:"Validate Email"}),m&&"Check your inbox for an email requesting validation."]})]})}var N=function(e){var t=Object(L.a)(e.auth),n=Object(l.a)(t,3),i=n[0],r=n[1],a=(n[2],Object(c.useState)(!1)),s=Object(l.a)(a,2),u=s[0],d=s[1];return Object(o.jsxs)("div",{className:"App",children:[r&&Object(o.jsx)("h1",{children:"Loading now"}),i&&Object(o.jsx)("div",{children:Object(o.jsx)(P,{initialData:e.initialData,collection:e.collection,auth:e.auth,user:i})}),!i&&Object(o.jsx)("div",{children:u?Object(o.jsxs)("div",{children:[Object(o.jsx)(y,{auth:e.auth}),Object(o.jsx)("br",{}),Object(o.jsx)("br",{}),Object(o.jsx)("div",{className:"miscText",children:"Returning user?"}),Object(o.jsx)("button",{onClick:function(){return d(!u)},children:"Sign in"})]}):Object(o.jsxs)("div",{children:[Object(o.jsx)(w,{auth:e.auth}),Object(o.jsx)("br",{}),Object(o.jsx)("br",{}),Object(o.jsx)("div",{className:"miscText",children:"New user?"}),Object(o.jsx)("button",{onClick:function(){return d(!u)},children:"Sign up"})]})})]})};function S(e){return Object(o.jsx)(N,{initialData:e.initialData,collection:e.collection,auth:e.auth})}x.a.initializeApp({apiKey:"AIzaSyDPKaTLMKCRxvZrUC0Mr-zhmIvgib-wo2w",authDomain:"cs124lab-86e6f.firebaseapp.com",projectId:"cs124lab-86e6f",storageBucket:"cs124lab-86e6f.appspot.com",messagingSenderId:"624846876574",appId:"1:624846876574:web:d46076bc03bef3f06ff08f",measurementId:"G-DNNRR8Y9S2"});var T=x.a.firestore().collection("List-AuthenticationRequired"),I=x.a.auth();a.a.render(Object(o.jsx)(i.a.StrictMode,{children:Object(o.jsx)(S,{initialData:[],collection:T,auth:I})}),document.getElementById("root")),s()}},[[53,1,2]]]);
//# sourceMappingURL=main.e5531d66.chunk.js.map